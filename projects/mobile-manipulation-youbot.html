<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<script type="text/javascript"
			src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
	</script>

	<title>Max's Portfolio</title>
	<link rel="icon" type="image/png" href="/public/images/logo_icon_black_small.png">

	<link rel="stylesheet" href="/public/stylesheets/style.css">

	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

</head>


<body class="bg-fixed bg-no-repeat bg-[left_-180px_top] md:bg-left bg-cover bg-blend-multiply bg-slate-700 h-[100svh] h-screen"
  style="background-image: url('/public/images/IMG_1287_ext.jpg')">
  
  <script type="text/javascript">
    (function (window, document, dataLayerName, id) {
      window[dataLayerName] = window[dataLayerName] || [], window[dataLayerName].push({ start: (new Date).getTime(), event: "stg.start" }); var scripts = document.getElementsByTagName('script')[0], tags = document.createElement('script');
      function stgCreateCookie(a, b, c) { var d = ""; if (c) { var e = new Date; e.setTime(e.getTime() + 24 * c * 60 * 60 * 1e3), d = "; expires=" + e.toUTCString(); f = "; SameSite=Strict" } document.cookie = a + "=" + b + d + f + "; path=/" }
      var isStgDebug = (window.location.href.match("stg_debug") || document.cookie.match("stg_debug")) && !window.location.href.match("stg_disable_debug"); stgCreateCookie("stg_debug", isStgDebug ? 1 : "", isStgDebug ? 14 : -1);
      var qP = []; dataLayerName !== "dataLayer" && qP.push("data_layer_name=" + dataLayerName), isStgDebug && qP.push("stg_debug"); var qPString = qP.length > 0 ? ("?" + qP.join("&")) : "";
      tags.async = !0, tags.src = "https://maxpalay.containers.piwik.pro/" + id + ".js" + qPString, scripts.parentNode.insertBefore(tags, scripts);
      !function (a, n, i) { a[n] = a[n] || {}; for (var c = 0; c < i.length; c++)!function (i) { a[n][i] = a[n][i] || {}, a[n][i].api = a[n][i].api || function () { var a = [].slice.call(arguments, 0); "string" == typeof a[0] && window[dataLayerName].push({ event: n + "." + i + ":" + a[0], parameters: [].slice.call(arguments, 1) }) } }(i[c]) }(window, "ppms", ["tm", "cm"]);
    })(window, document, 'dataLayer', '09cea3cf-ceae-4c5f-b845-21cfd41901d3');
  </script>
  
  <div id="wrapper">

    <script>
    // JavaScript to handle scrolling color change
    window.addEventListener('scroll', function() {
      var navbar = document.getElementById('navbar');
      var logo = document.getElementById('logo');
      var navitems = document.getElementById('navbar-items')
      var scrolled = window.scrollY > 50;
      var gh_logo = document.getElementById('gh-logo');

      // Adjust the background color based on the scroll position
      if (scrolled) {
        navbar.classList.add('bg-[#f9f9f9]/[1.0]');
        navbar.classList.remove('bg-[#f9f9f9]/[.1]');
        logo.classList.toggle('default-logo', !scrolled);
        logo.classList.toggle('scrolled-logo', scrolled);
        navitems.classList.toggle('text-white', !scrolled);
        navitems.classList.toggle('text-black', scrolled);
        gh_logo.classList.toggle('default-gh-logo', !scrolled);
        gh_logo.classList.toggle('scrolled-gh-logo', scrolled);
      } else {
        navbar.classList.remove('bg-[#f9f9f9]/[1.0]');
        navbar.classList.add('bg-[#f9f9f9]/[.1]');
        logo.classList.toggle('default-logo', !scrolled);
        logo.classList.toggle('scrolled-logo', scrolled);
        navitems.classList.toggle('text-white', !scrolled);
        navitems.classList.toggle('text-black', scrolled);
        gh_logo.classList.toggle('default-gh-logo', !scrolled);
        gh_logo.classList.toggle('scrolled-gh-logo', scrolled);
      }
    });
</script>



<nav id="navbar" class="bg-[#f9f9f9]/[.1] fixed w-full z-20 top-0 start-0 transition ease-in-out duration-200">
    <div class="max-w-screen-xl flex flex-nowrap items-center justify-between mx-auto p-4 px-10">
        <a id="logo" href="/" class="flex items-center space-x-3 rtl:space-x-reverse h-8 w-3/12 min-w-32 bg-no-repeat bg-contain bg-center default-logo"></a>
        <div class="w-full block w-auto justify-end flex" id="navbar-default">
          <ul id="navbar-items" class="text-white text-xs md:text-sm font-medium subpixel-antialiased flex p-0 mt-0 flex-row md:space-x-8 space-x-2 rtl:space-x-reverse border-0">
            <li>
              <a href="/" class="block bg-blue-700 rounded bg-transparent p-0 dark:hover:text-blue-500">Home</a>
            </li>
            <li>
              <a href="/about/" class="block rounded hover:bg-gray-100 hover:bg-transparent border-0 hover:text-blue-700 p-0 dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white dark:hover:bg-transparent">About</a>
            </li>
            <li>
              <a href="https://www.linkedin.com/in/max-palay/" target="_blank" class="block rounded hover:bg-gray-100 hover:bg-transparent border-0 hover:text-blue-700 p-0 dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white dark:hover:bg-transparent">Contact</a>
            </li>
            <li>
              <a id="gh-logo" href="https://github.com/maxipalay" target="_blank" class="block rounded hover:bg-gray-100 border-0 hover:text-blue-700 p-0 dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white dark:hover:bg-transparent h-full w-12 bg-no-repeat bg-contain bg-center default-gh-logo">
              </a>
            </li>
          </ul>
        </div>
      </div>
  </nav>

    <main class="project backdrop-filter backdrop-blur-md bg-opacity-80 bg-slate-800 min-h-screen" >
	<section id="project-content">
        <div class="py-20 w-9/12 md:w-8/12 mx-auto text-white text-justify text-sm md:text-lg font-normal max-w-screen-xl">
            
            <h2 id="project-date" class="text-right text-sm md:text-md font-normal my-4">November, 2023</h2>
            <h1 class="tracking-tight text-center leading-none relative mb-6 mt-0 text-2xl font-semibold text-slate-50 md:text-3xl lg:text-5xl px-16 lg:px-48">
                <span class="relative z-10">Mobile Manipulation Simulation</span>
            </h1>
            <h1 class="tracking-tight text-center text-sm md:text-lg">
                <span class="relative z-10">Kuka YouBot Kinematics & controls simulation.</span>
            </h1>
            <div class="h-0.5 w-1/2 my-8 content-center mx-auto relative">
                <div class="absolute inset-0 bg-gradient-to-r from-black/0 via-white/100 to-black/0 rounded-full"></div>
            </div>

            <div class="flex flex-wrap gap-2 font-mono text-white text-sm font-bold rounded-lg justify-center mx-auto">
                
                <div class="px-2 py-1 rounded-lg flex items-center justify-center bg-blend-multiply bg-slate-500">python</div>
                
                <div class="px-2 py-1 rounded-lg flex items-center justify-center bg-blend-multiply bg-slate-500">numpy</div>
                
                <div class="px-2 py-1 rounded-lg flex items-center justify-center bg-blend-multiply bg-slate-500">kinematics</div>
                
                <div class="px-2 py-1 rounded-lg flex items-center justify-center bg-blend-multiply bg-slate-500">modern robotics</div>
                
                <div class="px-2 py-1 rounded-lg flex items-center justify-center bg-blend-multiply bg-slate-500">kuka</div>
                
                <div class="px-2 py-1 rounded-lg flex items-center justify-center bg-blend-multiply bg-slate-500">youbot</div>
                
                <div class="px-2 py-1 rounded-lg flex items-center justify-center bg-blend-multiply bg-slate-500">feedforward</div>
                
                <div class="px-2 py-1 rounded-lg flex items-center justify-center bg-blend-multiply bg-slate-500">PID</div>
                
                <div class="px-2 py-1 rounded-lg flex items-center justify-center bg-blend-multiply bg-slate-500">control</div>
                
                <div class="px-2 py-1 rounded-lg flex items-center justify-center bg-blend-multiply bg-slate-500">simulation</div>
                
                <div class="px-2 py-1 rounded-lg flex items-center justify-center bg-blend-multiply bg-slate-500">CoppeliaSim</div>
                
              </div>
            
            <h2 id="overview">Overview</h2>

<p>This project implements a trajectory planner for the end effector of a Kuka YouBot mobile manipulator (mecanum wheel base with a 5R manipulator), and the necessary odometry and feedback control to perform a pick and place task. The implemented python code generates a csv output which is then played using CoppeliaSim. The physics engine simulates the interaction between the gripper and the cube.</p>

<iframe src="https://www.youtube-nocookie.com/embed/q_wZehMJp2Q?si=tJ_HICIAPgsavIt-" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="" class="mx-auto my-8 center w-full rounded-lg max-w-4xl" style="aspect-ratio: 16 / 9;"></iframe>

<h3 id="system-components">System components</h3>

<div class="w-11/12 mx-auto">
<ul class="list-disc">
<li><span class="font-semibold">Trajectory generation</span>: Given the cube's initial and final configurations in the space frame, the end effector initial configuration and a grasping configuration w.r.t the cube we can generate a trajectory that performs the pick and place task.  The motion is broken down into segments:
  <ul class="pl-8 md:pl-12 list-decimal">
    <li>Screw trajectory from initial pose to pick standoff</li>
    <li>Cartesian trajectory form pick standoff to pick</li>
    <li>Cartesian trajectory from pick to pick standoff</li>
    <li>Screw trajectory from pick standoff to place standoff</li>
    <li>Cartesian trajectory from place standoff to place</li>
    <li>Cartesian trajectory from place to place standoff</li>
  </ul>
</li>
<br />
<li><span class="font-semibold">Odometry</span>: based on commanded joint speeds, we estimate the chassis and robot configuration at each timestep.</li>
<br />
<li><span class="font-semibold">Feedback control</span>: a PI+Feedforward controller tracks the end effector error in positioning and generates the desired twist to minimize the error. </li>
<br />
<li><span class="font-semibold">Inverse kinematics</span>: based on the desired end effector twist to follow the trajectory, the Jacobian pseudoinverse allows us to translate the deisred twist to joint speeds.</li>
</ul>
</div>

<h3 id="implementation-notes">Implementation notes</h3>

<li>As an alternative to implementing self collision, workspace constraints were used for the
manipulator. These are set so that the manipulator can only operate over a bounded prismatic space in front of the mobile base.
This keeps the end effector operating only to the “front” of the mobile manipulator. If the
manipulator would violate these constraints then the Jacobian is put to zero for the whole
manipulator and only the mobile base would move in such a case. This is a very simplified version of workspace constraints but it is good enough for this project.
</li>
<p><br /></p>
<li>
A limiter for the integral term was implemented based on the norm of the twist error. Without
this, the integral term kept increasing very rapidly. This also makes it harder to get the overshoot
required for one of the sections of the project. The oscillations observed are smaller compared
to a non-limited version of the I term.
</li>

<h3 id="results">Results</h3>

<p>For the test presented in the video, the starting end effector position has an initial error of over 0.2m so we can see the operation of the controller.</p>

<p><img src="../public/images/projects/youbot/result-plot.png" class="mx-auto my-8 center w-2/3 rounded-lg max-w-4xl" /></p>
<div class="italic text-center font-xs">Image 1: EE positioning error vs. time.</div>
<p><br />
Image 1 shows the error rapidly decreasing to zero for the trajectories tracking. The
manipulator is able to successfully pick and place the cube for each task. Parameter tuning was
an important part of getting the system to work, and trying different parameters yields more
aggressive responses for higher Kp’s.</p>

<h3 id="references">References</h3>

<p><span class="italic">Modern Robotics: Mechanics, Planning and Control, Kevin Lynch and Frank Park, Cambridge University Press, 2017</span></p>


        </div>
		

	</section>

</main>


    

<footer class="rounded-lg shadow bg-[#f9f9f9]/[1.0]">
    <div class="w-full max-w-screen-xl mx-auto p-4">
        <div class="sm:flex sm:items-center sm:justify-between">
            <a class="flex items-center mb-4 sm:mb-0 space-x-3 rtl:space-x-reverse">
                <img src="/public/images/logo_acronym_small_black.png" class="h-6" alt="Logo" />
            </a>
            <ul class="flex flex-wrap items-center mb-6 text-sm font-medium text-gray-500 sm:mb-0 dark:text-gray-400">
                <li>
                    <a href="/about/" class="hover:underline me-4 md:me-6">About</a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/maximiliano-palay/" target="_blank" class="hover:underline">Contact</a>
                </li>
            </ul>
        </div>
        <hr class="my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-4" />
        <span class="block text-sm text-gray-500 sm:text-center dark:text-gray-400">2024 - Maximiliano Palay</span>
    </div>
</footer>




  </div>

  <div id="popup" class="fixed bottom-0 right-0 z-50 p-2 max-w-xl">
    <div class="relative">
      <div class="relative rounded-lg shadow bg-slate-800">
        <!-- Modal header -->
        <div class="flex items-center justify-between p-2">
          <p class="text-sm text-gray-500 dark:text-gray-400 px-4">
            This site is currently under development. Feedback is welcome!
          </p>
          <button type="button" id="hide-popup"
            class="text-slate-400 rounded-lg text-sm w-6 h-6 ms-auto inline-flex justify-center items-center bg-slate-700 hover:bg-slate-600 hover:text-white">
            <svg class="w-2 h-2" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.getElementById('hide-popup').addEventListener('click', function () {
      var popup = document.getElementById('popup');
      popup.classList.toggle('hidden');
    });
  </script>

</body>

</html>